
الإجراء (Action) في الكونترولر:

```csharp
[HttpPost]
public ActionResult CheckPassword([FromBody] PasswordViewModel passwordModel)
{
    if (passwordModel.password == "كلمة_المرور_الصحيحة")
    {
        return Json(new { success = true });
    }
    else
    {
        return Json(new { error = "كلمة المرور غير صحيحة." });
    }
}
```

نموذج البيانات `PasswordViewModel` يمكن أن يكون مثل هذا:

```csharp
public class PasswordViewModel
{
    public string password { get; set; }
}
```

الكود الجافا سكربت في HTML View:

```html
@using (Html.BeginForm("CheckPassword", "ControllerName", FormMethod.Post))
{
    <input type="text" id="passwordInput" />
    <button type="submit" id="checkPasswordButton">تحقق</button>
    <div id="errorContainer" style="color: red;"></div>
}

<script>
    $(document).ready(function () {
        $("#checkPasswordButton").click(function (e) {
            e.preventDefault();
            var password = $("#passwordInput").val();
            
            $.ajax({
                url: '/ControllerName/CheckPassword',
                type: 'POST',
                data: JSON.stringify({ password: password }),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (data) {
                    if (data.success) {
                        // كلمة المرور صحيحة، قم بتنفيذ الإجراءات اللازمة هنا
                    } else if (data.error) {
                        // كلمة المرور غير صحيحة، عرض رسالة الخطأ
                        $("#errorContainer").text(data.error);
                    }
                }
            });
        });
    });
</script>
```

تأكد من تعويض "ControllerName" بالاسم الصحيح للكونترولر الخاص بك. هذا المثال يستخدم `$.ajax` لإرسال البيانات كـ JSON واستقبال الرد أيضًا كـ JSON دون إعادة تحميل الصفحة.


////////////////////////////////////////


بالطبع، سأقوم بتبسيط الكود السابق بدون استخدام jQuery:

```html
<form id="passwordForm">
    <input type="text" id="passwordInput" />
    <button type="button" id="checkPasswordButton">تحقق</button>
    <div id="errorContainer" style="color: red;"></div>
</form>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var saveButton = document.getElementById("checkPasswordButton");
        var errorContainer = document.getElementById("errorContainer");

        saveButton.addEventListener("click", function (e) {
            e.preventDefault();
            var password = document.getElementById("passwordInput").value;

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/ControllerName/CheckPassword", true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

            xhr.onload = function () {
                if (xhr.status >= 200 && xhr.status < 300) {
                    var response = JSON.parse(xhr.responseText);
                    if (response.success) {
                        // كلمة المرور صحيحة، قم بتنفيذ الإجراءات اللازمة هنا
                    } else if (response.error) {
                        // كلمة المرور غير صحيحة، عرض رسالة الخطأ
                        errorContainer.textContent = response.error;
                    }
                } else {
                    errorContainer.textContent = "حدث خطأ أثناء الطلب.";
                }
            };

            xhr.send(JSON.stringify({ password: password }));
        });
    });
</script>
```

الكود الذي تم تبسيطه يستخدم JavaScript الخالي من jQuery للتفاعل مع الصفحة وإجراء الطلب على الخادم بشكل غير متزامن دون إعادة تحميل الصفحة. قم بتغيير "ControllerName" إلى اسم الكونترولر الخاص بك في URL الخاص بالطلب.



















///////////////////// 


    document.addEventListener("DOMContentLoaded", function () {
        var saveButton = document.getElementById("savebtn");
        var errorContainer = document.getElementById("error");

        saveButton.addEventListener("click", function (e) {
            e.preventDefault();
            var password = document.getElementById("old").value;

            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/login2/EditPasowrdd", true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

            xhr.onload = function () {
                if (xhr.status >= 200 && xhr.status < 300) {
                    var response = JSON.parse(xhr.responseText);
                    if (response.success) {
                        // كلمة المرور صحيحة، قم بتنفيذ الإجراءات اللازمة هنا
                    } else if (response.error) {
                        // كلمة المرور غير صحيحة، عرض رسالة الخطأ
                        errorContainer.textContent = response.error;
                    }
                } else {
                    errorContainer.textContent = "حدث خطأ أثناء الطلب.";
                }
            };

            xhr.send(JSON.stringify({ password: password }));
        });
    });

١١١١١١١١١١١١١١

لكي تحقق هذا السلوك، يجب أن يتم التحقق من صحة كلمة المرور داخل الإجراء (Action) وبناءً على النتيجة، يمكن إعادة توجيه المستخدم إلى صفحة أخرى في حالة نجاح أو عرض رسالة خطأ دون توجيه في حالة خطأ. هناك كود JavaScript في السؤال السابق يتيح لك تنفيذ هذا السلوك على الجانب العميل، والآن سنقوم بتحسين الإجراء ليتناسب مع هذا السيناريو.

الإجراء في الكونترولر:

```csharp
[HttpPost]
public ActionResult CheckPassword(string password)
{
    if (password == "كلمة_المرور_الصحيحة")
    {
        // الكلمة السرية صحيحة، يمكنك تنفيذ الإجراءات اللازمة هنا

        // في هذا المثال، سنقوم بتوجيه المستخدم إلى صفحة أخرى
        return RedirectToAction("SuccessPage");
    }
    else
    {
        // الكلمة السرية غير صحيحة، يمكن عرض رسالة خطأ
        return Json(new { error = "كلمة المرور غير صحيحة." });
    }
}
```

في هذا المثال، إذا كانت كلمة المرور صحيحة، سيتم توجيه المستخدم إلى "SuccessPage" (التي يجب أن تكون صفحة أخرى موجودة في تطبيقك). إذا كانت خاطئة، ستتم إعادة رسالة JSON مع خاصية "error" لعرضها بواسطة JavaScript.

ثم، يمكنك تحسين الكود الجافا سكربت لتنفيذ السلوك المطلوب:

```javascript
document.addEventListener("DOMContentLoaded", function () {
    var saveButton = document.getElementById("savebtn");
    var errorContainer = document.getElementById("error");

    saveButton.addEventListener("click", function (e) {
        e.preventDefault();
        var password = document.getElementById("old").value;

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/login2/EditPasowrdd", true);
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");

        xhr.onload = function () {
            if (xhr.status >= 200 && xhr.status < 300) {
                var response = JSON.parse(xhr.responseText);
                if (response.error) {
                    // عرض رسالة الخطأ
                    errorContainer.textContent = response.error;
                }
            } else {
                // حدث خطأ أثناء الطلب
                errorContainer.textContent = "حدث خطأ أثناء الطلب.";
            }
        };

        xhr.send(JSON.stringify({ password: password }));
    });
});
```

بهذا الشكل، إذا كانت كلمة المرور صحيحة، ستتم إعادة توجيه المستخدم إلى الصفحة "SuccessPage" (يمكنك استبدالها بالصفحة المستهدفة الخاصة بك)، وإذا كانت خاطئة، ستتم عرض رسالة الخطأ.
